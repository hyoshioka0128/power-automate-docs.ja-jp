---
title: ビジネス プロセス フローのエンティティ属性を使用する際のベスト プラクティス | MicrosoftDocs
description: ビジネス フローのエンティティ属性を使用する際のベスト プラクティスについて説明します。
ms.custom: ''
ms.date: 04/23/2019
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Business Process Flows
helpviewer_keywords:
- flow
- process flow
- business process flow
- process
- workflow
author: msftman
ms.author: deonhe
manager: kvivek
ms.openlocfilehash: e248b281592e974837adc09a2da5ba11f4e3919b
ms.sourcegitcommit: df7fb20065cfafc153b4bc4019dff2c94f4ef567
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/17/2020
ms.locfileid: "4553508"
---
# <a name="best-practices-in-using-business-process-flow-attributes"></a>ビジネス プロセスのフロー属性を使用する際のベスト プラクティス

[!INCLUDE[cc-data-platform-banner](./includes/cc-data-platform-banner.md)]

エンティティ内の旧式のプロセスに関連する属性は非推奨となりました。 ビジネス プロセス フローのエンティティで *アクティブなステージ* (activestageid) 属性を使用する際のベスト プラクティスをいくつか紹介します。 

## <a name="reporting-on-the-active-stage-of-a-business-process-flow"></a>ビジネス プロセス フローのアクティブ ステージについて報告する

**潜在顧客から営業案件への営業プロセス** がオンになっているアクティブなステージにあることを報告することで、営業パイプラインを表示させる例に基づいて説明します。

これまでは、ステージ別にビジネス プロセスについて報告する際に、ビジネス プロセス フローの関連エンティティごとにビューを定義し、*アクティブなステージ* (activestageid) フィールドについて報告する場合がありました。

関連エンティティの *アクティブなステージ* (activestageid) フィールドが非推奨になっているため、ビジネス プロセス フローは 2 とおりの方法で報告することができます。

### <a name="option-1-views-and-charts-on-business-process-flow-entity-recommended"></a>選択肢 1: ビジネス プロセス フロー エンティティのビューとグラフ **(推奨)**

バージョン 9.0 以降では、ビジネス プロセス フローごとに、ビジネス プロセス フロート同じ名前で独自の Microsoft Dataverse エンティティが作成されます。 ビジネス プロセス フローについて報告するには、報告対象のビジネス プロセス フローのエンティティを選択し、これまでと同じ方法でビューとグラフを作成します。

今回の例では、次の手順で **潜在顧客から営業案件への営業プロセス** エンティティに移動します。
1. [https://make.powerapps.com](https://make.powerapps.com) に移動します。
1. **データ** を選択します。
1. **エンティティ** を選択します。
1. フィルターを **すべて** に設定します。
1. **潜在顧客から営業案件への営業プロセス** エンティティを探して選択します。

   ![潜在顧客から営業案件への営業プロセス エンティティ](media/best-practices-entity-attributes/lead-opportunity-process.png)

ここでは、その他のエンティティと同様にビューとグラフを定義できます。

![変換プロセス エンティティの詳細](media/best-practices-entity-attributes/lead-to-opportunity-sales-process-details.png)

この手法の利点としては、単一のビューまたはグラフを使用して、複数のエンティティにまたがるビジネス プロセス フローについて報告できることです。

さらに、ビジネス プロセス フロー エンティティは Dataverse の他のあらゆるカスタム エンティティと変わらないため、カスタム フィールドをエンティティに追加し、必要な追加情報を追跡記録できます。

### <a name="option-2-copy-active-stage-to-a-related-entity"></a>選択肢 2: アクティブなステージを関連エンティティにコピーする

あるいは、関連エンティティに関する報告を続行するには、ビジネス プロセス フロー エンティティから関連 Dataverse エンティティのカスタム フィールドに *アクティブ ステージ* (activestageid) フィールドをコピーするフローを作成します。

この手法を使用する際は、いくつかの点にご留意ください :

1.  1 つのエンティティで複数のビジネス プロセス フローを実行することができます。 この手法の場合、エンティティで実行されるビジネス プロセス フロー別のアクティブなステージを 1 つのカスタム フィールドで格納することを推奨します。 この手法では、報告の整合性が維持されます。

1.  関連エンティティが報告元となるため、複数のエンティティにまたがるビジネス プロセス フローを報告する単一のビューを作成することはできません。

## <a name="using-the-active-stage-to-run-logic"></a>アクティブなステージを使用してロジックを実行する

次のような場合、アクティブなステージに基づいてロジックを実行する場合があります。

### <a name="using-the-active-stage-to-run-client-side-logic"></a>アクティブなステージを使用してクライアント側のロジックを実行する

ビジネス プロセスを使用する際は、自動化が望ましい作業が多くあります。 以下に例を示します:

-   フォームやビジネス プロセスのフローに関する新たに入手可能となる情報に基づいて、アクティブなビジネス プロセス フローを変更します。

-   ユーザーがステップやフォーム フィールドに入力した値に基づいて、アクティブなステージを次のステージ、または前のステージに移動します。

-   選択したステージに基づき、フォーム タブとフィールドの表示と非表示を切り替えます。

-   アクティブなビジネス プロセス フロー、アクティブまたは選択されたステージ、またはアクティブなステージの移動などのイベントに基づいて、情報を提供するメッセージを表示し、計算を実行します。

> [!TIP]
> このようなシナリオでは、ビジネス プロセス フローに対応している、一連の [クライアント API](https://docs.microsoft.com/dynamics365/customer-engagement/developer/clientapi/reference/formcontext-data-process) を使用します。
>

### <a name="using-the-active-stage-to-run-server-side-logic"></a>アクティブなステージを使用してサーバー側のロジックを実行する

ビジネス プロセス フローに基づく自動化を、サーバー側で行う必要性が発生する場合があります。 以下に例を示します:

-   **営業案件の営業プロセス** の **見込みありと評価する** ステージがアクティブな状態となって 15 日間以上経過した場合、ユーザーに電子メールを送信します。

-   **営業案件の営業プロセス** のアクティブなステージが変化するたびに、そのプロセスに関連する一連のアクティビティを自動的に作成します。

-   クローズ処理のための通話アクティビティが完了すると、自動的に **営業案件の営業プロセス** を終了します。

> [!TIP]
> ビジネス プロセス フローのエンティティに定義した従来の Dataverse ワークフローまたはフローを使用します。
> 

内部ソリューション レビューのアクティビティを作成する Dataverse ワークフローを構築し、**営業案件の営業プロセス** の **提案** ステージで顧客をフォローアップする方法 :

1. **営業案件の営業プロセス** エンティティでフローを作成し、エンティティの **アクティブなステージ** フィールドが変更されるたびに実行するように設定します。 
1. **アクティブなステージ** フィールドが **提案** となっていることを確認する条件を定義します。 
1. ソリューションの社内レビューに使用する予約と通話レコードを作成し、ソリューションのレビューに使用する顧客の通話を作成します。

   ![ステージ終了のフォローアップ](media/best-practices-entity-attributes/close-stage-followup.png)
