---
title: 業務プロセス フローの概要 | MicrosoftDocs
ms.custom: ''
ms.date: 05/06/2019
ms.reviewer: ''
ms.service: flow
author: MSFTMAN
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- Power Apps
ms.assetid: 4469877e-bb95-481a-bc52-c9746f937ce5
caps.latest.revision: 16
ms.author: DEONHE
manager: kvivek
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: 9d3ded6a38d45fa97a206abdf0ee5d89d2255124
ms.sourcegitcommit: 7a42629c7bc15208c5a9d692ab89616fc0aa40cb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/08/2020
ms.locfileid: "3352066"
---
# <a name="business-process-flows-overview"></a>業務プロセス フローの概要


業務プロセス フローを作成することによって、データを一貫して入力し、顧客と作業するたびに同じステップを実行するように確認することができます。 たとえば、すべてのユーザーが顧客のサービス要求を同じ方法で処理できるようにビジネス プロセス フローを作成したり、注文を送信する前に請求書の承認を得ることを必要としたりすることができます。 業務プロセス フローはそのほかのプロセスと同じテクノロジを使用しますが、その機能はプロセスを使用する他機能と大きく異なります。 業務プロセス フローの作成または編集の方法については、「[業務プロセス フローの作成](create-business-process-flow.md)」を参照してください。  
  
 [業務プロセス フローに関する短いビデオ (4:49) を参照してください](https://go.microsoft.com/fwlink/p/?linkid=842226)  
  
<a name="BKMK_Why"></a>   
## <a name="why-use-business-process-flows"></a>業務プロセス フローを使用する理由。  
業務プロセス フローは、ユーザーがタスクを完了する手引を提供します。 組織が定義した対話的なプロセスでユーザーをある種の結果にまで導く効率的ユーザー エクスペリエンスを提供します。 このユーザー エクスペリエンスは、異なるセキュリティ ロールを持つユーザーが、自分たちが行う作業で最適なエクスペリエンスを得るように調整されます。  
  
 業務プロセス フローを使用して、望む結果を得るためにユーザーが踏むべき一連の手順を定義します。 これらのステップにより、ユーザーはビジネス プロセスのどの段階にいるかが視覚的にわかります。 ビジネス プロセス フローを使用すると、新しいユーザーは自分が使用する必要があるエンティティに集中する必要がないため、トレーニングの必要性が軽減されます。 新しいユーザーはプロセスに沿って操作します。 業務プロセス フローを構成して、営業グループがより良い結果に達成できるような共通の営業方法をサポートします。 サービス グループに対しては、業務プロセス フローは、新しいスタッフがすばやく現状を把握し、顧客の不満足に至る失敗を防止することを助けます。  
  
<a name="BKMK_What"></a>   
## <a name="what-can-business-process-flows-do"></a>業務プロセス フローの役割  
 業務プロセス フローを使用して、一連の*ステージ* と *ステップ* を定義します。それらはフォームの上部のコントロールに表示されます。  
  
 ![複数のステージに分かれたビジネス プロセス](media/business-process-stages.png "ステージを含むビジネス プロセス")  
  
 各ステージには、手順のグループが含まれています。 各手順は、データを入力するフィールドを表します。 ユーザーは、**次のステージ**ボタンを使用して次のステージに進みます。 次のステージに進む前に、対応するフィールドのデータを入力するように要求する手順を作成することができます。 これは通常 "ステージ ゲーティング" と呼びます。  
  
 業務プロセス フローは、他のプロセスに比べて比較的簡単に感じます。ステージへのデータ入力や入力制御のための効率化されたエクスペリエンス以外は、条件付きビジネス ロジックまたは自動化が提供されないからです。 ただし、他のプロセスやカスタマイズと結合するすると、時間の節約、トレーニングのコストの削減、およびユーザーの適用向上に重要な役割を果たします。  

<a name="BKMK_BPFwithOtherCustomizations"></a>   
### <a name="business-process-flows-integrated-with-other-customizations"></a>他のカスタマイズと統合された業務プロセス フロー  
 業務プロセス フローを使用してデータを入力すると、データ変更はフォーム フィールドにも適用され、業務ルールやフォーム スクリプトで提供された自動化は直ちに適用されます。 フォームにはないフィールドの値を設定する手順が加えられ、これらのフィールドはフォーム スクリプトで使用される `Xrm.Page` オブジェクト モデルに追加されます。 業務プロセス フローに含まれるフィールドへの変更により開始されるすべてのワークフローは、フォームのデータを保存すると適用されます。 自動化がリアルタイム ワークフローによって適用される場合、レコードが保存された後フォーム内のデータが更新されるときに、変更はユーザーにすぐに表示されます。  
  
 フォームの業務プロセス フロー コントロールはクライアント側のプログラミングを提供しませんが、業務ルールまたはフォーム スクリプトによって適用された変更は業務プロセス フロー コントロールに自動的に適用されます。 フォームのフィールドを非表示にすると、そのフィールドは、業務プロセスのフロー制御でも非表示になります。 業務ルールまたはフォーム スクリプトを使用して値を設定すると、その値は業務プロセス フロー内に設定されます。  
  
### <a name="concurrent-process-flows"></a>同時実行処理フロー  
 コンカレント ビジネス プロセス フローによって、カスタマイザーは複数のビジネス プロセスを構成し、同じ開始レコードを使用することでこれらを関連付けることができます。 ユーザーは同時に実行されている複数のビジネス プロセス間で切り替えでき、事前に作業していた、プロセス内のステージから作業を再開できます。  
  
<a name="BKMK_SystemBPF"></a>   
### <a name="system-business-process-flows"></a>システム業務プロセス フロー  
 次の業務プロセス フローが組み込まれています。 業務プロセス フローの仕組みを理解するには、次のシステム業務プロセス フローを確認します。  
  
-   潜在顧客から営業案件への Sales Process  
  
-   営業案件の Sales Process  
  
-   サポート案件への電話のプロセス  
  
<a name="BKMK_multipleEntities"></a>   
## <a name="multiple-entities-in-business-process-flows"></a>業務プロセス フローの複数のエンティティ  
 単一のエンティテや複数のエンティティにまたがって、ビジネス プロセスのフローを使用できます。 たとえば、営業案件で始まり、見積もり、受注、請求に進み、最後に営業案件に戻って閉じるというプロセスがあるとします。  
  
 最大 5 つの異なるエンティティのレコードを単一のプロセスにまとめる業務プロセス フローを設計できます。それにより、このアプリを使用するユーザーは、作業中のエンティティに集中するのではなくプロセスのフローに集中できます。 関連するエンティティ レコード間をさらに容易に移動できます。  
  
<a name="BKMK_MultipleBPF"></a>   
## <a name="multiple-business-process-flows-are-available-per-entity"></a>複数の業務プロセス フローは、エンティティごとに使用できる  
 組織のすべてのユーザーが同じ手順に従うわけではないので、さまざまなプロセスに当てはまる様々な条件が必要な場合があります。 エンティティごとに最大 10 件のアクティブな業務プロセス フローがあり、さまざまな状況に合ったプロセスが提供されます。  
  
<a name="BPF_controlsWhichBPF"></a>   
### <a name="control-which-business-process-flow-will-be-applied"></a>業務プロセス フローが適用されるコントロール  
 セキュリティ ロールに業務プロセス フローを関連付けて、これらのセキュリティ ロールを持っているユーザーだけに表示され使用できるようにることができます。 また、既定でどの Business Process Flow を設定するか制御するために、Business Process Flow の順序を設定することもできます。 これは、エンティティの複数のフォームが定義されるのと同じ方法で機能します。  
  
 ユーザーが新規エンティティ レコードを作成するとき、使用可能なアクティブなビジネス プロセス定義の一覧がユーザーのセキュリティ ロールによってフィルター処理されます。 プロセス受注一覧に従ってユーザーのセキュリティ ロールで使用できる最初のアクティブなビジネス プロセス定義は、既定で適用される定義です。 複数のアクティブなビジネス プロセス定義を利用できる場合は、[プロセスの切り替え] ダイアログから別の定義を読み込むことができます。 プロセスが切り替えられるときはいつでも、現在表示されているプロセスはバックグラウンドに移動して選択されたプロセスに置き換わりますが、その状態を維持していて元の状態に切り替えることができます。 各レコードに複数のプロセス インスタンスを関連付けることができます (各インスタンスに対して異なる業務プロセス フロー定義を最大合計 10 まで)。 フォームの読み込み時には、1 つの業務プロセス フローのみが表示されます。 ユーザーが別のプロセスを適用すると、そのプロセスは、その特定のユーザーの既定としてのみロードされる場合があります。  
  
 ビジネス プロセスをすべてのユーザーの既定として確実に読み込むために (プロセスの「ピン留め」と同等の動作)、ビジネス プロセス定義 ID に基づいて既存のビジネス プロセスのインスタンスを特別に読み込む、ユーザー定義のクライアント API スクリプト (Web リソース) をフォームの読み込み時に追加することができます。 
 
  
<a name="BKMK_Considerations"></a>   
## <a name="business-process-flow-considerations"></a>業務プロセス フローに関する考慮事項  
 業務プロセス フローをサポートするエンティティに業務プロセス フローを定義できます。 追加できるプロセス、ステージおよび手順の数の上限を認識する必要があります。  
  
### <a name="business-process-flows-that-call-a-workflow"></a>ワークフローを呼び出す業務プロセス フロー  
 業務プロセス フローの内部からオンデマンド ワークフローを呼び出すことができます。 ワークフロー コンポーネントをプロセス ステージまたはグローバル ワークフロー セクションにドラッグすることによリ、新しい業務プロセス フロー デザイナーからこれを設定できます。 業務プロセス フローでのワークフローの使用の詳細については、「[ブログ: Dynamics 365 での業務プロセス フローの自動化](https://blogs.msdn.microsoft.com/crm/2017/03/28/business-process-flow-automation-in-dynamics-365/)」を参照してください。  
  
 業務プロセス フローの [ステージの終了] ステージでトリガーするワークフローを含め、そのステージがフローの最後のステージである場合は、デザイナーは、そのステージが完了したときにワークフローがトリガーされるという印象を与えます。 ただし、ステージの移行が行われないため、ワークフローはトリガされません。 ステージにワークフローを含めることを妨げる警告またはエラーは表示されません。 ユーザーが業務プロセス フローと対話するとき、プロセスの終了または放棄はステージの移行にはならず、したがってワークフローはトリガーされません。 以下の例を参照してください:  
  
-   ステージ S2 でワークフローを使用して S1 を S2 に接続し、トリガーを**ステージの終了**に設定する 2 つのステージで業務プロセス フローを作成します。  
  
-   業務プロセス フローを作成するには、S1 を S2 に接続し、S2 を S3 に接続します。 S2 にワークフローを含め、トリガーを**ステージの終了**に設定します。  
  
 どちらの場合でもワークフローはトリガーされません。 この問題を回避するには、グローバル ワークフローを追加し、トリガーするワークフローを追加して、プロセスの段階ではなくビジネス プロセスに対してワークフローがトリガーされるようにします。 グローバル ワークフローのトリガーを [破棄されたプロセス] または [完了されたプロセス] に設定して、ユーザーがビジネス プロセスを中止または完了したときにワークフローをトリガーさせることができます。  
  
<a name="BKMK_Entities"></a>   
### <a name="entities-that-can-use-business-process-flows"></a>業務プロセス フローを使用できるエンティティ  
 業務プロセス フローは、すべてのカスタム エンティティを使用することができます。 以下の標準エンティティでも業務プロセス フローを使用できます :  
  
-   取引先企業   
-   予定​​  
-   キャンペーン  
-   キャンペーン活動  
-   キャンペーンの反応  
-   競合企業  
-   取引先担当者   
-   電子メールの送信  
-   権利  
-   FAX   
-   サポート案件​​  
-   請求書   
-   リード​​  
-   レター   
-   マーケティング リスト  
-   営業案件​​  
-   電話   
-   製品  
-   価格表品目  
-   見積もり   
-   定期的な予定   
-   営業資料   
-   ソーシャル活動  
-   順序  
-   ユーザー   
-   タスク  
-   チーム   
  
 業務プロセス フローのユーザー定義エンティティを有効にするには、エンティティの定義の**業務プロセス フロー (フィールドが作成されます)** チェック ボックスを選択します。 この操作は元に戻すことに留意してください。  
  
> [!NOTE]
>  `Social Activity` エンティティが含まれているビジネス プロセス フローのステージに移動して、**次のステージ**ボタンを選択すると、**作成**オプションが表示されます。 **作成**を選択すると、**ソーシャル活動**フォームが読み込まれます。 ただし、`Social Activity` は アプリ ユーザー インターフェイスからの `Create` に対して有効ではないので、フォームを保存できない場合は、エラー メッセージ "予期しないエラーが発生しました" が表示されます。  
  
<a name="BPF_MaxNumbers"></a>   
### <a name="maximum-number-of-processes-stages-and-steps"></a>プロセス、ステージおよび手順の最大数  
 許容可能なパフォーマンスとユーザー インターフェイスの利便性を実現するには、業務プロセス フローを使用する際に留意する必要のある制限があります。  
  
-   エンティティごとには最大 10 つのアクティブ化した業務プロセス フローのプロセスしかありません。  
  
-   各プロセスには 30 以上のステージを含めることはできません。  
  
-   複数のエンティティ プロセスには 5 つ以上のエンティティを含めることはできません。
  
## <a name="business-process-flow-entity-customization-support"></a>業務プロセス フロー エンティティ カスタマイズ サポート 

Dynamics 365 (online) バージョン 9.0 更新プログラムでは、業務プロセス フローのエンティティがシステムに表示され、グリッド、ビュー、グラフ、およびダッシュボードでエンティティ レコード データを使用することができます。 

### <a name="use-business-process-flow-entity-records-with-grids-views-charts-and-dashboards"></a>グリッド、ビュー、グラフ、およびダッシュボードで業務プロセス フローのエンティティ レコードを使用する

エンティティとして利用可能な業務プロセス フローを使用して、潜在顧客または営業案件などの指定されたエンティティのために、業務プロセス フロー データに由来する高度な検索、ビュー、グラフ、およびダッシュボードを使用することができるようになりました。 システム管理者およびカスタマイザーは、他の任意のエンティティで作成したものと似た、カスタム業務プロセス フロー グリッド、ビュー、グラフ、およびダッシュボードを作成することができます。

**潜在顧客から営業案件への営業プロセス**などの業務プロセス フローは、ソリューション エクスプローラー内にカスタマイズ可能なエンティティとして表示されます。

![潜在顧客から営業案件へのプロセス エンティティを持つソリューション エクスプローラー](media/bpf-lead-solution-explorer.png)

既定の業務プロセス フローのビューにアクセスするには、ソリューション エクスプローラーを開き、**エンティティ**を展開し、**潜在顧客から営業案件への営業プロセス**などの必要なプロセスを展開し、**ビュー**を選択してから、必要なビューを選択します。

**アクティブな営業案件の営業プロセス**ビューなど、グラフとして表示することができる複数の既定のビューが使用可能です。 

![アクティブな営業案件の営業プロセス ビュー](media/bpf-default-view.png)

### <a name="interact-with-the-business-process-flow-entity-from-a-workflow"></a>ワークフローから業務プロセス フロー エンティティとやり取りをする
ワークフローから業務プロセス フロー エンティティとやり取りすることも可能です。 たとえば、業務プロセス フロー エンティティ レコードのワークフローを作成し、営業案件エンティティ レコード上のフィールドが更新された際に [アクティブなステージ] を変更することができます。 手順の詳細については、[ワークフローを使用した業務プロセス フローのステージの自動化](https://blogs.msdn.microsoft.com/crminthefield/2017/12/18/automate-business-process-flow-stages-using-workflows) を参照してください。

### <a name="run-business-process-flows-offline"></a>ビジネス プロセス フローをオフラインで実行する

次の条件が満たされている場合は、ビジネス プロセス フローをオフラインで使用できます :

- 業務プロセス フローがPower Apps アプリから使用される。
- Power Apps アプリをオフラインで使用できます。
- ビジネス プロセス フローに単一のエンティティが含まれている。

具体的には、 Power Apps アプリがオフラインの場合に、業務プロセス フローで次の 3 つのコマンドを利用できます。

- 次の段階
- 前のステージ
- アクティブなステージを設定します

### <a name="limitations-of-using-business-process-flow-entities"></a>業務プロセス フロー エンティティの使用上の制限

- 現在、業務プロセス フローに基づいてエンティティのユーザー定義フォームを作成することはできません。
- ソリューションに業務プロセス フロー エンティティが含まれる場合、このビジネス プロセス フローのエンティティは、エクスポートを行う前に手動でソリューションに追加しておく必要があります。 これが行われていない場合、ビジネス プロセス フロー エンティティがソリューション パッケージに含まれません。 詳細は、[エンティティの作成と編集](https://docs.microsoft.com/powerapps/maker/common-data-service/create-edit-entities-solution-explorer)を参照してください。
- モデル駆動型アプリにプロセス エンティティを追加すると、機能が制限される場合があります。 詳細については、[ビジネス プロセス フローの作成と編集](https://docs.microsoft.com/power-automate/create-business-process-flow) を参照してください。 

### <a name="next-steps"></a>次の手順  
 [業務プロセス フローに関する短いビデオ (4:49) を参照してください](https://go.microsoft.com/fwlink/p/?linkid=842226)   
 [ビジネス プロセス フローの作成](create-business-process-flow.md)   
 [分岐を使用してビジネス プロセス フローを強化する](enhance-business-process-flows-branching.md) <br/>
 [ホワイトペーパー: Dynamics 365 でのプロセスの有効化](https://download.microsoft.com/download/C/3/B/C3B46E35-9445-43B9-800B-474E022EE352/Process%20Enablement%20with%20Microsoft%20Dynamics%20CRM%202013.pdf)</br>
