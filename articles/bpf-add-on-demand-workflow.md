---
title: 業務プロセス フローへのオンデマンド ワークフローの追加
description: ''
author: MSFTMAN
ms.author: Deonhe
manager: kvivek
ms.date: 07/12/2018
ms.topic: article
ms.service: flow
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- Power Apps
ms.assetid: 26c79c20-2987-476e-983a-406e0db13034
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: bb8ca7efb83a863f3031dd18d0d9bd67ae3c5c07
ms.sourcegitcommit: d336e5ffb6cf07e5c8fefe19a87dd7668db9e074
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/26/2020
ms.locfileid: "3297122"
---
# <a name="add-an-on-demand-workflow-to-a-business-process-flow"></a>業務プロセス フローへのオンデマンド ワークフローの追加


業務プロセス フロー内からオンデマンドでワークフローをトリガーすることができます。 たとえば、ステージが完了するたびにアクティビティ (タスク、電子メールなど) が作成されるように、オンデマンド ワークフローを業務プロセス フローに追加できます。 

ワークフローは、ワークフローを業務プロセス フロー デザイナーにドロップした場所を基にアクティブにされます。
- オンデマンドのステージ プロセス。 ワークフローが業務プロセス フロー ステージにドロップされると、ステージの開始または終了でワークフローがトリガーされます。 
- オンデマンドのグローバル プロセス。 ワークフローが **[Global Workflows]\(グローバル ワークフロー\)** 領域にドロップされると、プロセスのアクティブ化またはプロセスのアーカイブで (状態が適用済み、完了済み、再アクティブ化済み、または破棄された状態に切り替えられたときに) ワークフローがトリガーされます。 

ワークフローを業務プロセス フローに追加する場合、次の要件に注意してください。
- ステージに追加されたワークフローの場合: お客様がワークフローを追加するステージの同じエンティティのために作成された、アクティブなオンデマンド ワークフローのみを使用できます。  
- グローバル ワークフローの場合: 業務プロセス フローのプライマリ エンティティ用に作成されたアクティブなオンデマンド ワークフローのみを使用できます。

## <a name="add-an-on-demand-workflow-to-a-business-process-flow-stage"></a>オンデマンド ワークフローを業務プロセス フローのステージに追加する

ワークフロー コンポーネントをプロセス ステージまたはグローバル ワークフロー セクションにドラッグすることで、業務プロセス フロー デザイナーからオンデマンド ワークフローを追加します。 

[PowerApps](https://make.powerapps.com)サイトで、**モデル駆動型** (ナビゲーション ウィンドウの左下) を選択します。 

業務プロセス フロー デザイナーを開きます。 2 つの方法のいずれかでこの操作を行うことができます。
- 業務プロセス フローが既にアプリに追加されている場合、**[…]** を選択するアプリの横の **[アプリ]** に移動して、**[編集]** を選択します。 アプリ デザイナーで業務プロセス フローを選択し、![[Open business process flow designer]\(業務プロセス フロー デザイナーを開く\)](media/dynamics365-open-designer.PNG) を選択します。  
- それ以外の場合は、[ソリューション エクスプローラー](/powerapps/maker/model-driven-apps/advanced-navigation.md#solution-explorer)を開き、左側のナビゲーション ウィンドウで **[プロセス]** を選択し、目的の業務プロセス フローを選択します。 

オンデマンド ワークフローが次の業務プロセス フロー イベントのいずれかによってトリガーされるようにする必要があるかどうかを決定します。 
- オンデマンドのステージ プロセス。 ステージの開始または終了でワークフローをトリガーします。 
- オンデマンドのグローバル プロセス。 プロセスのアクティブ化またはプロセスのアーカイブのいずれかで (状態が適用済み、完了済み、再アクティブ化済み、または破棄された状態に切り替えられたときに) ワークフローをトリガーします。 

以下の例では、"**My on demand workflow**" という名前のオンデマンド ワークフローが業務プロセス フローの **[ステージ 1]** に追加されます。 

1. ステージ 1 を展開して、**[トリガーされたプロセス]** セクションを表示します。 
2. **[コンポーネント]** タブを選択して、**[ワークフロー]** を **[トリガーされたプロセス]** セクションにドラッグします。
    ![ワークフローをステージに追加する](media/add-workflow-to-bpf-1.png) 代わりに、**[Global Workflows]\(グローバル ワークフロー\)** セクションに **[ワークフロー]** をドラッグできます。これにより、プロセスのアクティブ化またはプロセスのアーカイブのいずれかでワークフローがトリガーされます。
 ![ワークフローをプロセスのアクティブ化またはアーカイブに追加する](media/add-workflow-to-bpf-global.png)
3. **[プロパティ]** タブの検索ボックスに、業務プロセス フロー ステージに追加するオンデマンド ワークフローの名前を入力して検索し、**[適用]** を選択します。
    ![名前を入力して [適用] を選択する](media/add-workflow-to-bpf-2.png)
4. **[トリガー]** の下の **[プロパティ]** タブで、**[ステージの開始]** または **[ステージの終了]** のいずれかを選択します。  
    ![ワークフロー トリガーを選択する](media/workflow-trigger.png)
   
    代わりに、ワークフローを **[Global Workflows]\(グローバル ワークフロー\)** セクションにドロップした場合、トリガー オプションは **[適用されたプロセス]**、**[再アクティブ化されたプロセス]**、**[破棄されたプロセス]**、および **[完了したプロセス]** です。

5. 業務プロセス フロー デザイナーのツール バーで **[更新]** を選択します。
 
## <a name="next-steps"></a>次のステップ
[ワークフロー プロセスを使用して、ユーザーの操作を必要としないようにプロセスを自動化する](workflow-processes.md) <br/>
[チュートリアル: プロセスを標準化する業務プロセス フローを作成する](create-business-process-flow.md) <br/>
[Dynamics 365 での業務プロセス フローの自動化](https://blogs.msdn.microsoft.com/crm/2017/03/28/business-process-flow-automation-in-dynamics-365/)
