---
title: FTP | Microsoft Docs
description: FTP を使用したアクションについての参考情報
author: mariosleon
ms.service: flow
ms.topic: article
ms.date: 12/02/2020
ms.author: marleon
ms.reviewer: ''
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: 3002b2afe3cd9c6a984f375e5d167b432a960f77
ms.sourcegitcommit: b043b7e8c29afee4f4f25bbf0d5a662d9af9272c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/09/2020
ms.locfileid: "4711623"
---
# <a name="ftp"></a>FTP



FTP サーバーのファイルとフォルダーを管理

|<!-- --> |
|-----|
|[FTP 接続を開く](#openconnection)|
|[FTP ディレクトリの一覧表示](#listdirectory)|
|[Secure FTP 接続を開く](#opensecureconnection)|
|[接続を閉じる](#closeconnection)|
|[作業ディレクトリの変更](#changeworkingdirectory)|
|[FTP からファイルをダウンロード](#downloadfiles)|
|[FTP からフォルダーをダウンロード](#downloadfolders)|
|[ファイルを FTP にアップロード](#uploadfiles)|
|[フォルダーを FTP にアップロード](#uploadfolders)|
|[FTP ファイルを削除](#deletefiles)|
|[FTP ファイルの名前を変更する](#renamefile)|
|[FTP ディレクトリの作成](#createdirectory)|
|[FTP ディレクトリを削除](#deletedirectory)|
|[FTP コマンドの呼び出し](#invokecommand)|
|[ディレクトリの同期](#synchronizedirectoryaction)|

### <a name="open-ftp-connection"></a><a name="openconnection"></a>FTP 接続を開く
このアクションを実行すると、リモート FTP サーバーへの特定の接続が確立され、後で使用できるようにその接続が変数として保存されます。

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|ホスト|無効|テキスト値||ここに FTP サーバーのアドレスを入力します。|
|ポート|有効|数値|21|ここに FTP サーバーのポートを入力します。|
|アクティブ モード|N/A|ブール値|無効|接続のモードを指定|
|ユーザー名|無効|テキスト値||使用する FTP アカウントのユーザー名を指定|
|パスワード|有効|暗号化された値||使用する FTP アカウントのパスワードを指定|
|タイムアウト|有効|数値|10|接続の確立を待機する時間 (秒) を設定します。この時間内に接続が確立されない場合には、アクションは失敗します|


##### <a name="variables-produced"></a>生成された変数
|引数|型|内容|
|-----|-----|-----|
|FTPConnection|FTP 接続|FTP 接続|


##### <a name="exceptions"></a><a name="openconnection_onerror"></a> 例外
|例外|内容|
|-----|-----|
|ログイン失敗エラー|ログインが失敗したことを示します|
|つながりエラー|接続に問題があることを示します|

### <a name="list-ftp-directory"></a><a name="listdirectory"></a>FTP ディレクトリの一覧表示
このアクションを実行すると、FTP 接続の現在のディレクトリに含まれるサブディレクトリとファイルが返されます

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|つながり |無効|FTP 接続||FTP 接続|
|パス|有効|テキスト値||一覧表示するパス。|


##### <a name="variables-produced"></a>生成された変数
|引数|型|内容|
|-----|-----|-----|
|ディレクトリ|FTP ディレクトリの一覧|一覧表示されたディレクトリ|
|ファイル|FTP ファイルの一覧|一覧表示されたファイル|


##### <a name="exceptions"></a><a name="listdirectory_onerror"></a> 例外
|例外|内容|
|-----|-----|
|一覧表示エラー|フォルダーの一覧表示を実行できなかったことを示します|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「ディレクトリが存在しません」エラー|ディレクトリが見つからなかったことを示します|

### <a name="open-secure-ftp-connection"></a><a name="opensecureconnection"></a>Secure FTP 接続を開く
このアクションを実行すると、リモート FTP サーバーへのセキュリティで保護された特定の接続が確立され、後で使用できるようにその接続が変数として保存されます

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|ホスト|無効|テキスト値||ここに FTP サーバーのアドレスを入力します。|
|ポート|有効|数値|22|ここに FTP サーバーのポートを入力します。|
|アクティブ モード|N/A|ブール値|有効|接続のモードを指定|
|Secure FTP プロトコル|N/A|SFTP、明示的 FTPS、暗黙的 FTPS|SFTP|接続の暗号化に使う FTP プロトコルを選択|
|認証方法|N/A|ユーザー名とパスワード、秘密キー、秘密キーとパスフレーズ|ユーザー名とパスワード|FTP サーバーで自分自身を認証するために使う方法を選択|
|ユーザー名|無効|テキスト値||使用する FTP アカウントのユーザー名を指定|
|パスワード|有効|暗号化された値||使用する FTP アカウントのパスワードを指定|
|秘密キーへのパス|無効|テキスト値||認証に使う秘密キーへのファイル パスを入力|
|秘密キーのパスフレーズ|有効|暗号化された値||ここに秘密キーのパスフレーズを含む変数を入力|
|タイムアウト|有効|数値|10|接続の確立を待機する時間 (秒) を設定します。この時間内に接続が確立されない場合には、アクションは失敗します|


##### <a name="variables-produced"></a>生成された変数
|引数|型|内容|
|-----|-----|-----|
|SftpConnection|FTP 接続|SFTP 接続|


##### <a name="exceptions"></a><a name="opensecureconnection_onerror"></a> 例外
|例外|内容|
|-----|-----|
|ログイン失敗エラー|ログインが失敗したことを示します|
|つながりエラー|接続に問題があることを示します|

### <a name="close-connection"></a><a name="closeconnection"></a> 接続を閉じる
このアクションを実行すると、開いている FTP 接続が閉じられます

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|つながり |無効|FTP 接続||FTP 接続|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="closeconnection_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|

### <a name="change-working-directory"></a><a name="changeworkingdirectory"></a> 作業ディレクトリの変更
このアクションを実行すると、FTP 接続用の現在の作業ディレクトリが設定されます

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|つながり |無効|FTP 接続||FTP 接続|
|作業ディレクトリを以下に設定|無効|テキスト値||作業ディレクトリとして設定するパスを設定します|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="changeworkingdirectory_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「ディレクトリが存在しません」エラー|ディレクトリが見つからなかったことを示します|
|作業ディレクトリの変更不可エラー|作業ディレクトリを変更できないことを示します|

### <a name="download-files-from-ftp"></a><a name="downloadfiles"></a>FTP からファイルをダウンロード
1 つまたは複数のファイルを FTP サーバーからダウンロードします

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|フォルダーにダウンロード|無効|フォルダー||ダウンロードするファイルの保存先となるフォルダー|
|ダウンロードするファイル|無効|FTP ファイルの一覧||ダウンロードするファイル|
|転送の種類|N/A|自動、バイナリ、ASCII|自動です|ASCII またはバイナリを入力して、単一のファイルをダウンロードする方法を指定します。 ファイルの種類が不明な場合、または複数のファイルがダウンロードされている場合は、自動を選択してオプションで指定された転送ルールに従います。|
|ファイルが存在する場合|N/A|上書き、ダウンロードしない、一意の名前でダウンロードする|上書きする|ファイルが既に存在する場合の処理を指定します。 上書きは元のファイルを上書きしてアクセスできないようにし、ユニークな名前でダウンロードすると、末尾にアンダースコアと連番が追加されます|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="downloadfiles_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「リモート ファイルが存在しません」エラー|ファイルが FTP サーバー上に存在しないことを示します|
|「ディレクトリが存在しません」エラー|ディレクトリが見つからなかったことを示します|
|FTP 接続の中止エラー|FTP 接続が中止されたことを示します|
|ファイルのダウンロード不可エラー|ファイルをダウンロードできなかったことを示します|

### <a name="download-folders-from-ftp"></a><a name="downloadfolders"></a>FTP からフォルダーをダウンロード
1 つまたは複数のフォルダーを FTP サーバーからダウンロードします

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|ダウンロードするフォルダー|無効|FTP ディレクトリの一覧||ダウンロードするフォルダーのパスまたは FTP フォルダーの名前|
|ローカル フォルダーにダウンロード|無効|フォルダー||ダウンロードしようとしている FTP フォルダーの保存先の完全なパス|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="downloadfolders_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「リモート ディレクトリが存在しません」エラー|ディレクトリが FTP サーバー上に存在しないことを示します|
|「ディレクトリが存在しません」エラー|ディレクトリが見つからなかったことを示します|
|FTP 接続の中止エラー|FTP 接続が中止されたことを示します|
|ディレクトリのダウンロード不可エラー|ディレクトリをダウンロードできなかったことを示します|

### <a name="upload-files-to-ftp"></a><a name="uploadfiles"></a>ファイルを FTP にアップロード
1 つまたは複数のファイルを FTP サーバーにアップロードします

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|アップロードするファイル|無効|ファイルの一覧||アップロードするファイル|
|リモートの場所|有効|テキスト値||ファイルをアップロードする場所|
|転送の種類|N/A|自動、バイナリ、ASCII|自動です|ASCII またはバイナリを入力して、単一のファイルをダウンロードする方法を指定します。 ファイルの種類がわからない場合、または複数のファイルをダウンロードしている場合は、[自動] を選択して、オプションで指定された転送ルールに従います|
|ファイルが存在する場合|N/A|上書き、ダウンロードしない、一意の名前でダウンロードする|上書きする|ファイルが既に存在する場合の処理を指定します。 上書きは元のファイルを上書きしてアクセスできないようにし、一意の名前でダウンロードすると、末尾にアンダースコアと連番が追加されます|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="uploadfiles_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「ファイルが見つかりませんでした」エラー|ファイルが見つからなかったことを示します|
|FTP 接続の中止エラー|FTP 接続が中止されたことを示します|
|ファイルのアップロード エラー|ファイルをアップロードできなかったことを示します|

### <a name="upload-folders-to-ftp"></a><a name="uploadfolders"></a>フォルダーを FTP にアップロード
1 つまたは複数のフォルダーを FTP サーバーにアップロードします

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|アップロードするフォルダー|無効|フォルダーの一覧||アップロードするフォルダーです。 アップロードされるフォルダーは、FTPサーバーのアクティブ ディレクトリ内に既に存在していてはなりません|
|リモートの場所|無効|テキスト値||フォルダーをアップロードする場所|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="uploadfolders_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「リモート ディレクトリが存在しません」エラー|ディレクトリが FTP サーバー上に存在しないことを示します|
|FTP 接続の中止エラー|FTP 接続が中止されたことを示します|
|ディレクトリのアップロード エラー|ディレクトリをアップロードできなかったことを示します|

### <a name="delete-ftp-file"></a><a name="deletefiles"></a>FTP ファイルを削除
1 つまたは複数のファイルを FTP サーバーから削除します

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|削除するファイル|無効|FTP ファイルの一覧||削除するファイル|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="deletefiles_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「ファイルが見つかりませんでした」エラー|ファイルが見つからなかったことを示します|
|ファイルの削除不可エラー|ファイルの削除を実行できなかったことを示します|

### <a name="rename-ftp-file"></a><a name="renamefile"></a>FTP ファイルの名前を変更する
FTP サーバー上にあるファイルの名前を変更します

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|名前を変更するファイル|無効|FTP ファイル||名前を変更するファイル|
|新しいファイル名|無効|テキスト値||ファイルの新しい名前です。 パス付きの名前を入力すると、ファイルがその場所に移動します。 場所が存在しない場合、例外がスローされます|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="renamefile_onerror"></a> 例外
|例外|内容|
|-----|-----|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|ファイルの名前変更不可エラー|ファイルの名前を変更できなかったことを示します|
|「ファイルが見つかりませんでした」エラー|ファイルが見つからなかったことを示します|

### <a name="create-ftp-directory"></a><a name="createdirectory"></a>FTP ディレクトリの作成
FTP サーバーにディレクトリを作成します

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|新しいディレクトリ|無効|FTP ディレクトリ||新しいディレクトリです。 パスを指定すると、新しいディレクトリにつながるすべての新しいフォルダが作成されます|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="createdirectory_onerror"></a> 例外
|例外|内容|
|-----|-----|
|アクセス拒否エラー|このアカウントが操作に対するアクセス権を持っていないことを示します|
|ファイルの存在エラー|ファイルが既に存在することを示します|
|ディレクトリの作成エラー|ディレクトリを作成できなかったことを示します|
|「ディレクトリが存在しません」エラー|ディレクトリが見つからなかったことを示します|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|

### <a name="delete-ftp-directory"></a><a name="deletedirectory"></a>FTP ディレクトリを削除
FTP サーバーからディレクトリを削除します

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|削除するディレクトリ|無効|FTP ディレクトリ||削除するフォルダーです。 フォルダ内のすべてが削除されます|


##### <a name="variables-produced"></a>生成された変数
- このアクションは変数を生成しません

##### <a name="exceptions"></a><a name="deletedirectory_onerror"></a> 例外
|例外|内容|
|-----|-----|
|ディレクトリの削除エラー|ディレクトリを削除できなかったことを示します|
|「リモート ディレクトリが存在しません」エラー|ディレクトリが FTP サーバー上に存在しないことを示します|
|作業ディレクトリの変更エラー|作業ディレクトリを変更できなかったことを示します|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|

### <a name="invoke-ftp-command"></a><a name="invokecommand"></a>FTP コマンドの呼び出し
サーバー上で指定されたリテラル FTP コマンドを呼び出します

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|FTP コマンド|無効|テキスト値||引数を指定して実行するコマンドです。 たとえば、FEAT を実行したり、CHMOD を実行したりすることができます|
|有効な応答コード|有効|テキスト値||コマンドから返される可能性のあるコードをセミコロンで区切って表示します。 FTPコマンドがここに入力されていないコードを返した場合、このアクションは例外をスローします。 単純な FTP、または FTPS 接続でのみ適用されます|


##### <a name="variables-produced"></a>生成された変数
|引数|型|内容|
|-----|-----|-----|
|ReplyCode|テキスト値|返された実際のコードです。 単純な FTP、または FTPS 接続でのみ適用されます|
|ReplyText|テキスト値|FTP サーバーによって返されるテキスト|


##### <a name="exceptions"></a><a name="invokecommand_onerror"></a> 例外
|例外|内容|
|-----|-----|
|コマンドの呼び出しエラー|FTP コマンドの呼び出し中にエラーが発生したことを示します|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|

### <a name="synchronize-directories"></a><a name="synchronizedirectoryaction"></a> ディレクトリの同期
指定したフォルダーのファイルとサブディレクトリを特定のリモート FTP ディレクトリと同期

##### <a name="input-parameters"></a>入力パラメーター
|引数|省略可能|承認|既定|内容|
|-----|-----|-----|-----|-----|
|FTP 接続|無効|FTP 接続||作業を行う FTP 接続です。 この変数は、Open FTP 接続アクションで事前に指定されている必要があります|
|同期の方向|N/A|リモート -> ローカル (ダウンロード)、ローカル -> リモート (アップロード)|リモート -> ローカル (ダウンロード)|同期化メソッドの方向です。 ローカル フォルダーをリモート ディレクトリに同期させるか (DOWNLOAD)、リモート ディレクトリをローカル フォルダに同期させるか (UPLOAD) を選択します|
|同期するファイル|N/A|すべてのファイル、ファイル フィルターに一致するファイルのみ、ファイル フィルターに一致しないファイルのみ|すべてのファイル|すべてのファイルを同期するか、ファイル フィルターを使って特定のファイルのセットを追加または除外するかを選択します|
|ファイル フィルター|有効|テキスト値|*|どのファイルを含め、除外するかを制御するファイル名パターンです。 このオプションでは、"*.txt" , "document?.doc" などのワイルドカードを使用することができます。このオプションでは、コマを区切り文字として使用して複数のフィルタを設定することもできます (例 : "*.txt,*.pdf,document?")。|
|ローカル フォルダー|無効|フォルダー||同期するローカル フォルダーの名前|
|FTP ディレクトリ|有効|FTP ディレクトリ|/|同期する FTP ディレクトリの名前|
|ソースが存在しない場合は削除|N/A|ブール値|無効|このオプションを選択すると、ソースではなくターゲット ディレクトリに存在するファイルまたはフォルダーが削除されます。|
|サブディレクトリを含める|N/A|ブール値|有効|このオプションを選択すると、同期プロセスにサブディレクトリが含められます。|
|時差 (時間単位)|有効|数値|0|リモート サーバーが別のタイム ゾーンで稼働している場合の時差 (時間単位) です。|
|時差 (分単位)|有効|数値|0|リモート サーバーが別のタイム ゾーンで稼働している場合の時差 (分単位) です。|
|時差 (先行)|N/A|ブール値|有効|サーバーのタイム ゾーンが先行しているかどうかを指定します。|


##### <a name="variables-produced"></a>生成された変数
|引数|型|内容|
|-----|-----|-----|
|FtpFilesAdded|FTP ファイルの一覧|最初はソースに存在し、同期プロセス後にターゲットに追加された FTP ファイルの一覧です。|
|FtpFilesModified|FTP ファイルの一覧|最初はソースとターゲットの両方に存在し、同期プロセス後にターゲットに追加された FTP ファイルの一覧です。|
|FtpFilesDeleted|FTP ファイルの一覧|最初はターゲット ディレクトリに存在し、同期プロセス後に削除された FTP ファイルの一覧です。|
|FilesAdded|ファイルの一覧|最初はソースに存在し、同期プロセス後にターゲットに追加されたファイルの一覧です。|
|FilesModified|ファイルの一覧|最初はソースとターゲットの両方に存在し、同期プロセス後にターゲットに追加されたファイルの一覧です。|
|FilesDeleted|ファイルの一覧|最初はターゲット ディレクトリに存在し、同期プロセス後に削除されたファイルの一覧です。|


##### <a name="exceptions"></a><a name="synchronizedirectoryaction_onerror"></a> 例外
|例外|内容|
|-----|-----|
|一覧表示エラー|フォルダーの一覧表示を実行できなかったことを示します|
|未接続エラー|FTP サーバーの開いている接続がないことを示します|
|「ファイルが見つかりませんでした」エラー|ファイルが見つからなかったことを示します|
|FTP 接続の中止エラー|FTP 接続が中止されたことを示します|
|ファイルのアップロード エラー|ファイルをアップロードできなかったことを示します|
|「リモート ファイルが存在しません」エラー|ファイルが FTP サーバー上に存在しないことを示します|
|ファイルのダウンロード不可エラー|ファイルをダウンロードできなかったことを示します|
|ディレクトリの削除エラー|ディレクトリを削除できなかったことを示します|
|同期失敗エラー|予期しないエラーによって同期プロセスが失敗したことを示します。|


